<div class="mt-5">
    <div>
        <button *ngIf="!nuevaCita" (click)="nuevaCita = true" class="btn btn-info">Mostrar formulario</button>
        <button *ngIf="nuevaCita" (click)="nuevaCita = false" class="btn btn-warning">Ocultar formulario</button>
    </div>
    <div *ngIf="nuevaCita">
        <h3>Formulario para nueva cita</h3>
        <div>
            <form [formGroup]="postForm">
                <div>
                    <label>Paciente</label>
                    <select formControlName="pacienteId" required 
                    class="form-control">
                        <option *ngFor="let paciente of pacientes" 
                        value="{{paciente.pacienteId}}">{{paciente.nombre}}</option>
                    </select>
                </div>
                <div>
                    <label>Medico</label>
                    <select formControlName="medicoId" required
                    class="form-control">
                        <option *ngFor="let medico of medicos" 
                        value="{{medico.medicoId}}">{{medico.nombre}}</option>
                    </select>
                </div>
                <div class="mt-3">
                    <label>Fecha</label>
                    <input formControlName="fecha" required
                    type="date" class="form-control">
                </div>
                <div>
                    <label>Detalle de la cita</label>
                    <textarea formControlName="descripcion" required
                    class="form-control" cols="30" rows="10"></textarea>
                </div>
                <div class="mt-4">
                    <button (click)="postCita()" type="submit"
                    class="btn btn-info w-25 mr-5">Crear</button>
                    <button type="button" class="btn btn-danger w-25">Borrar</button>
                </div>
            </form>
        </div>
    </div>

    <div class="mt-3">
        <h2>Listado de citas</h2>

        <table class="table">
            <thead class="encabezado-tabla">
              <tr>
                <th scope="col">Fechas</th>
                <th scope="col">Medico</th>
                <th scope="col">Pacientes</th>
                <th scope="col">Descripciones</th>
                <th scope="col">Estado</th>
                <th scope="col">Herramientas</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let cita of citas">
                <th scope="row">{{  cita.fecha }}</th>
                <td>{{ cita.medico.nombre + " " + cita.medico.apellido }}</td>
                <td>{{ cita.paciente.nombre + " " + cita.paciente.apellido }}</td>
                <td>{{ cita.descripcion }}</td>
                <td>
                  <span *ngIf="!cita.realizada">Pendiente</span>
                  <span *ngIf="cita.realizada">Realizada</span>
                </td>
                <td>
                    <span><a (click)="verCita(cita.citaId)" class="btn btn-success mr-2">Editar</a></span>
                    <span><a (click)="deleteCita(cita.citaId)" class="btn btn-danger">Borrar</a></span>
                </td>
              </tr>
            </tbody>
          </table>
    </div>

</div>